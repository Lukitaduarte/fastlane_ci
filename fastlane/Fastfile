opt_out_usage

###
###  Flutter
###

lane :fetch_dependencies do
  sh "cd .. && flutter pub get --suppress-analytics"
end

lane :build_autogenerated_code do
  sh "cd .. && flutter pub run build_runner build --delete-conflicting-outputs"
end

lane :test do
  sh "cd .. && flutter test --no-pub --suppress-analytics"
end

platform :flutter do
  desc "Check pull request flow"
  lane :pull_request do
    fetch_dependencies
    build_autogenerated_code
    # todo: lint
    test
  end
end
